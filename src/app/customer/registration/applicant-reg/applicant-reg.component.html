<div class="container-fluid">
    <h2 class="text-center"> New MI Subsidy Registration </h2>

    <form [formGroup]="registrationForm" class="card">
        <div class="d-flex flex-column">
            <div *ngIf="sucessMessage" class="alert alert-success">
                {{sucessMessage}}
            </div>

            <div *ngIf="errorMessage.message">
                <div class="alert alert-danger">
                    <b> {{errorMessage.message}} </b>
                    <br>
                    <span *ngIf="errorMessage.desc">
                        {{errorMessage.desc}}
                    </span>
                </div>
            </div>

            <div *ngIf="errorMessageList.length > 0" class="alert alert-danger">
                <div *ngFor="let message of errorMessageList" class="error-list-msg py-1">
                    <b> {{message}} </b>
                </div>
            </div>
        </div>

        <div class="p-3">

            <div class="row py-2">
                <div class="col-6">
                    <label for="applicationId" class="col-5"> Application Id </label>
                    <input type="text" formControlName="applicationId" id="applicationId" class="col-7 form-control">
                </div>
                <mat-icon matTooltip="Copy Application ID" [cdkCopyToClipboard]="clipboardCopy" class="pt-2 mat-icon-btn"> content_copy </mat-icon>
            </div>

            <div class="row py-2">
                <div class="col">
                    <label for="aadhaarNo" class="col-5"> Aadhaar ID Number </label>
                    <input type="text" formControlName="aadhaarNo" id="aadhaarNo" class="col-7 form-control" autofocus>
                </div>

                <div class="col">
                    <label for="farmerName" class="col-5"> Farmer Name </label>
                    <input type="text" formControlName="farmerName" id="farmerName" class="col-7 form-control">
                </div>
            </div>

            <div class="row py-2">
                <div class="col">
                    <label for="farmerType" class="col-5"> Farmer Type </label>
                    <select name="farmertype" formControlName="farmerType" id="farmerType" class="col-7 form-control">
                        <option *ngFor="let type of formerTypeList" [value]="type.value">
                            {{type.option}}
                        </option>
                    </select>
                </div>

                <div class="col">
                    <label for="fatherName" class="col-5"> Father Name </label>
                    <input type="text" name="fatherName" formControlName="fatherName" id="fatherName"
                        class="col-7 form-control">
                </div>
            </div>

            <div class="row py-2">
                <div class="col">
                    <label for="department" class="col-5"> Department </label>
                    <select name="department" formControlName="department" id="department" class="col-7 form-control">
                        <option *ngFor="let type of departmentList" [value]="type.value">
                            {{type.option}}
                        </option>
                    </select>
                </div>

                <div class="col">
                    <label for="miCompany" class="col-5"> MI Company </label>
                    <select name="miCompany" formControlName="miCompany" id="miCompany" class="col-7 form-control">
                        <option *ngFor="let type of miCompanyList" [value]="type.value">
                            {{type.option}}
                        </option>
                    </select>
                </div>
            </div>

            <!-- <div class="row py-2">
                <div class="col">
                    <label for="landOwnership" class="col-5"> Land Ownership </label>
                    <input type="text" formControlName="landOwnership" id="landOwnership" class="col-7 form-control">
                </div>

                <div class="col-6">
                    <label for="landOwnSon" class="col-5"> (Lease / Land owner) S/O or W/O Name </label>
                    <input type="text" formControlName="landOwnSon" id="landOwnSon" class="col-7 form-control">
                </div>
            </div> -->

            <div class="row py-2">
                <div class="col">
                    <label for="mobileNo" class="col-5"> Mobile Number </label>
                    <input type="text" formControlName="mobileNo" id="mobileNo" class="col-7 form-control">
                </div>

                <div class="col">
                    <label for="gender" class="col-5"> Gender </label>
                    <select name="gender" formControlName="gender" id="gender" class="col-7 form-control">
                        <option *ngFor="let type of genderList" [value]="type.value">
                            {{type.option}}
                        </option>
                    </select>
                </div>
            </div>

            <div class="row py-2">
                <div class="col">
                    <label for="block" class="col-5"> Block </label>
                    <input type="text" formControlName="block" id="block" class="col-7 form-control">
                </div>

                <div class="col">
                    <label for="village" class="col-5"> Village </label>
                    <input type="text" formControlName="village" id="village" class="col-7 form-control">
                </div>
            </div>

            <div class="row py-2">
                <div class="col">
                    <label for="district" class="col-5"> District </label>
                    <input type="text" formControlName="district" id="district" class="col-7 form-control">
                </div>

                <div class="col">
                    <label for="socialStatus" class="col-5"> Social Status </label>
                    <select name="socialStatus" formControlName="socialStatus" id="socialStatus"
                        class="col-7 form-control">
                        <option *ngFor="let type of socialStatusList" [value]="type.value">
                            {{type.option}}
                        </option>
                    </select>
                </div>
            </div>

            <div *ngIf="!enableSaveCancelBtn && !isNewRegForm" class="row justify-content-end py-4 px-4">
                <button type="button" class="btn btn-theme-primary px-4 mx-3" (click)="selectedAction('update')"> Update
                </button>
                <button type="button" class="btn btn-theme-primary px-4" (click)="showModal=true" data-toggle="modal"
                    data-target="#deletionWarningModal"> Delete </button>
            </div>

            <div *ngIf="isNewRegForm" class="row justify-content-end py-4 px-4">
                <button type="button" class="btn btn-theme-primary px-4 mx-3" (click)="selectedAction('new')"> Submit
                </button>
                <button type="button" class="btn btn-theme-primary reset-btn px-4 mx-3" (click)="resetFormData()"> Reset
                </button>
                <button *ngIf="this.custRecFormData.length" type="button" class="btn btn-theme-primary px-4"
                    (click)="showModal=true" data-toggle="modal" data-target="#deletionWarningModal"> Delete </button>
            </div>

            <div *ngIf="enableSaveCancelBtn" class="row justify-content-end py-4 px-4">
                <button type="submit" class="btn btn-theme-primary px-4 mx-3" (click)="submitApplicantForm()"> Save
                </button>
                <button type="button" class="btn btn-theme-primary reset-btn px-4 mx-3" (click)="resetFormData()"> Reset
                </button>
                <button type="button" class="btn btn-theme-primary px-4 mx-2" (click)="cancelFormAction()"> Cancel
                </button>
            </div>
        </div>
    </form>

    <div class="row" *ngIf="postMarkSection.createdBy">
        <div class="col">
            Created: {{postMarkSection.createdBy}}
            <br>
            Created At: {{postMarkSection.createdAt | date:'dd-MM-yy h:mm:ss a'}}
        </div>
        <div class="col">
            Updated: {{postMarkSection.updatedBy}}
            <br>
            Updated At: {{postMarkSection.updatedAt | date:'dd-MM-yy h:mm:ss a'}}
        </div>
    </div>

    <div class="d-flex justify-content-around pt-3">
        <button mat-button matStepperPrevious class="btn-theme-secondary mx-3"> Back </button>
        <button mat-button matStepperNext [ngClass]="enableNextBtn ? 'btn-theme-secondary' : 'disabled-btn'"
            [disabled]="!enableNextBtn" (click)="nextBtnSelected()"> Next
        </button>

        <a routerLink="../docs" class="btn btn-sm btn-theme-secondary mx-3">
            View Docs
        </a>
    </div>

    <!-- Modal -->
    <div *ngIf="showModal" class="modal showModal" id="deletionWarningModal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3> <b> Record Deletion Warning </b> </h3>
                    <button type="button" class="close" (click)="showModal=false" data-dismiss="modal"
                        aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body"> {{deletionWarningMsg}} </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-theme-secondary px-4" (click)="deleteCustRecord()"> Yes</button>
                    <button type="button" class="btn btn-theme-primary px-4" (click)="showModal=false"> No </button>
                </div>
            </div>
        </div>
    </div>
</div>